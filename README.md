# Data_for_ML

## HW_1

### Что здесь происходит

Это репозиторий, в котором содержится работа с соскрапленным с cian.ru датасетом квартир.
Датасет используется в рамках ДЗ по курсу Data_for_ML.

Автор - @qeshtir (Макаров Игорь Юрьевич)

### Структура проекта

1. /artifacts - датасеты и картинки для redame
2. /assets - ассеты дагстера
3. /notebooks - ноутбуки для лучшей визуализации домашних заданий
4. /src - исходники функций и скриптов, которые тестируются перед преобразованием в ассет

### DoD

- [x]  _**Соберите данные из двух разных источников (открытый датасет + веб-скрейпинг или API).**_
    
    По договорённости с преподавателем, т.к. скраппер самописный, собираю только со скраппера.
    1600 +- записей в датасете считаю достаточными, т.к. простенькая регрессия на таком количестве сходится быстро, 
    а признаки разнородны, требуют постобработки и содержат пропуски
- [x]  **_Проведите их агрегацию, создав единый датасет._**

    Не требуется
- [x]  _**Проведите разведывательный анализ данных (EDA)._**

    Произведён в ноутбуке [hw_1.ipynb](notebooks%2Fhw_1.ipynb). См. соответствующий раздел.
- [x]  **_Постройте базовые визуализации для основных признаков с учетом разметки данных._**
    
    Произведёно в ноутбуке [hw_1.ipynb](notebooks%2Fhw_1.ipynb). См. раздел EDA.
- [x] **_Опишите возможные применения этих данных в контексте машинного обучения._**

    Данные размечены ценой квартиры, предсказание которой от множества параметров 
    является классической регрессионной задачей. Признаки подобраны так, чтобы было 
    можно применить великое множество различных методов, от OHE до семантического 
    анализа описания.

### Выводы ДЗ 1

Итоговый скрапер собирает первые 100 страниц сайта cian.ru и делает базовые предобработки.
Сохраняет при этом только новые объявления.

Также можно запустить дагстер с расписанием выполнения скрапинга и обогащения. Для этого:

1. Установите зависимости из requirements.txt
2. В руте проекта выполните команду:

```bash
dagster dev -f .\assets\dagster_assets.py
```

3. Перейдите по адресу http://127.0.0.1:3000/jobs

Вы увидите картинку:
![01_schedule.png](artifacts%2Fpictures%2F01_schedule.png)

Когда джоб запустится, то по адресу http://127.0.0.1:3000/runs вы сможете увидеть запуск и его тип 
(на картинке я запускал вручную):
![01_runs.png](artifacts%2Fpictures%2F01_runs.png)

Внутри вы увидите что-то такое:
![01_success_run.png](artifacts%2Fpictures%2F01_success_run.png)

## HW_2
### DoD
Самый подробный анализ проведён в файле [hw_2.ipynb](notebooks%2Fhw_2.ipynb)

Здесь будут пояснены только те части DoD, которые, возможно, недостаточно полно объяснены в ноутбуке.
#### Часть 1: «Следствие ведёт детектив»
- [x] **_Возьмите датасет из задания._**
- [x] **_Проанализируйте пропуски: определите их процент и расположение (случайны ли пропуски или есть закономерность?)_**
- [x] **_Сформулируйте гипотезу о возможных причинах появления пропусков._**
- [x] **_Проанализируйте датасет на выбросы удобным вам методом._**
- [x] **_Опишите возможные применения этих данных в контексте машинного обучения._**

#### Часть 2: «Выбор подходящего оружия»
- [x] **_Примените несколько разных методов работы с пропусками, выбросами._**
- [x] **_Приведите данные в единый вид, поработайте над категориальными признаками._**

    Категориальные признаки обработаны без большого баннера о том, что приступаем к их обработке. Но если видите tqdm прогресс бар - это оно.
- [x] **_Оцените, как каждый из методов повлиял на распределение данных и результаты простого анализа (например, расчёт среднего или простая регрессия)._**

    Проверялся просто describe, распределения из ДЗ 1 и регрессия с нормализацией.

#### Часть 3: «Раскрытие дела»
- [x] **_Выберите и обоснуйте самый эффективный метод для вашего набора данных._**
- [x] **_Сформулируйте краткую рекомендацию по оптимальному подходу к обработке пропущенных значений в вашем датасете._**

    Сформулирована в виде итогового плана работ с пропусками. Вышло очень эффективно, на мой взгляд.

#### Дополнительные баллы («Расследование с изюминкой»)

- [x] Предложите собственный метод или комбинацию методов, которые лучше всего подходят именно для вашего случая.

    Вывод этого пункта на вашу оценку, однако я, как и предполагал, оценил влияние на качество простейшей регрессии комбинации обработки выбросов: эвристика + IsolationForest.  Несмотря на то, что IsolationForest не является моим методом, применение его на табличных данных робко предложу в качестве некоторой изюминки в очистке.

В дополнение была переработана структура ассетов, чтобы код был красив и понятен. Картинка для иллюстрации:
![02_success_run.png](artifacts%2Fpictures%2F02_success_run.png)
